<div style="padding: 10px 20px">
  <div *ngIf="meta; else noSelected">
    <div
      style="
        margin-bottom: 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      "
    >
      <button mat-raised-button color="accent" (click)="onClickAddPassword()">
        <mat-icon>add</mat-icon>
        password
      </button>
      <div [title]="meta.name">
        <button mat-button class="file" (click)="onClickSelectFile()">
          <mat-icon>text_snippet</mat-icon>{{ selectedFileName }}
        </button>
      </div>
    </div>
  </div>
  <div fxLayout="row">
    <div class="tag-list">
      <h3>Tags</h3>
      <ul>
        <li *ngFor="let tag of tagsWithNoTagKey">
          <a href="#{{ tag }}">{{ tag }}</a>
        </li>
      </ul>
    </div>
    <div class="password-area">
      <ng-container
        *ngTemplateOutlet="
          templatePasswordsEachTag;
          context: { passwords: passwords }
        "
      ></ng-container>
    </div>
  </div>
</div>

<ng-template #noSelected>
  <button mat-raised-button (click)="onClickSelectFile()">select file</button>
</ng-template>

<ng-template #templatePasswordsEachTag>
  <div *ngFor="let tag of tagsWithNoTagKey">
    <h1 [id]="tag" [name]="tag">{{ tag }}</h1>
    <div style="padding: 0 20px">
      <ng-container
        *ngTemplateOutlet="
          templatePasswords;
          context: { passwords: passwordsEachTag[tag] }
        "
      ></ng-container>
    </div>
  </div>
</ng-template>

<ng-template #templatePasswords let-passwords="passwords">
  <div fxLayout="row wrap">
    <ng-container *ngFor="let password of passwords; let i = index">
      <app-password-detail
        [password]="password"
        [index]="i"
        [isShowPassword]="isShowPassword"
        [isShowLoginId]="isShowLoginId"
      ></app-password-detail>
    </ng-container>
  </div>
</ng-template>
